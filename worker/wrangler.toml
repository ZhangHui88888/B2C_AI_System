# Cloudflare Worker Configuration
name = "dtc-ecommerce-api"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# Development settings
[dev]
port = 8787
local_protocol = "http"

# Environment variables (use `wrangler secret put` for secrets)
[vars]
ENVIRONMENT = "development"
SUPABASE_URL = "https://itjxmxuipgdpmuyhyunu.supabase.co"
DEFAULT_BRAND_SLUG = "techgear"
# SUPABASE_SERVICE_KEY = "在这里填入你的 service_role 密钥，或使用 wrangler secret put"

# Vectorize binding for AI knowledge base (configure after creating index)
# [[vectorize]]
# binding = "KNOWLEDGE_VECTORIZE"
# index_name = "dtc-knowledge-base"

# KV namespace for caching (optional)
# [[kv_namespaces]]
# binding = "CACHE"
# id = "your-kv-namespace-id"

# Production environment
[env.production]
name = "dtc-ecommerce-api"
vars = { ENVIRONMENT = "production" }

# Staging environment
[env.staging]
name = "dtc-ecommerce-api-staging"
vars = { ENVIRONMENT = "staging" }
