# ç¬¬8é˜¶æ®µï¼šå¤šå“ç‰Œç®¡ç†

> ä¸€å¥—ä»£ç è¿è¥å¤šä¸ªç‹¬ç«‹å“ç‰Œ

---

## ğŸ“‹ åŠŸèƒ½æ¨¡å—

### 8.1 å“ç‰Œç®¡ç†

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| å“ç‰Œåˆ›å»º | âœ… | å®Œæ•´ CRUD |
| å“ç‰Œç¼–è¾‘ | âœ… | ä¿¡æ¯/è®¾ç½® |
| åŸŸåç»‘å®šé…ç½® | âœ… | brand_domains è¡¨ |
| å“ç‰Œä¸»é¢˜å®šåˆ¶ | âœ… | é¢œè‰²/å­—ä½“/æ ·å¼/è‡ªå®šä¹‰CSS |
| ç”¨æˆ·æƒé™åˆ†é… | âœ… | brand_user_assignments è¡¨ |

### 8.2 åä½œç®¡ç†

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| æ€»åå° | âœ… | All Brands è§†å›¾ |
| å“ç‰Œç‹¬ç«‹åå° | âœ… | å“ç‰Œåˆ‡æ¢å™¨å¢å¼º |
| è·¨å“ç‰Œæ•°æ®çœ‹æ¿ | âœ… | /admin/overview |
| çŸ¥è¯†åº“å…±äº« | âœ… | is_shared æ ‡è®° |
| æ¨¡æ¿å…±äº« | âœ… | /admin/templates |

---

## ğŸ—‚ï¸ ç›¸å…³æ–‡ä»¶

### åç«¯ API
- `worker/src/routes/brands.ts` - å“ç‰Œ CRUD
- `worker/src/middleware/brand.ts` - å“ç‰Œè¯†åˆ«ä¸­é—´ä»¶

### æ•°æ®åº“
- `docs/database/011_multi_brand_management.sql` - å¤šå“ç‰Œè¡¨

### å‰ç«¯é¡µé¢
- `frontend/src/pages/admin/brands/` - å“ç‰Œç®¡ç†åå°
- `frontend/src/pages/admin/overview.astro` - è·¨å“ç‰Œçœ‹æ¿
- `frontend/src/pages/admin/templates.astro` - æ¨¡æ¿å…±äº«

---

## ğŸ—ï¸ å¤šå“ç‰Œæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cloudflare Workers (API)                 â”‚
â”‚                    Cloudflare Pages (å‰ç«¯)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   brand1.com â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚                    â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   brand2.com â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â–¶â”‚   Supabase æ•°æ®åº“    â”‚          â”‚
â”‚                    â”‚      â”‚   (æ•°æ®æŒ‰ brand_id   â”‚          â”‚
â”‚   brand3.com â”€â”€â”€â”€â”€â”€â”˜      â”‚    éš”ç¦»)             â”‚          â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ å“ç‰Œè¯†åˆ«æµç¨‹

```
è¯·æ±‚è¿›å…¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¯»å– Host å¤´    â”‚
â”‚ brand1.com      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŸ¥è¯¢ KV ç¼“å­˜    â”‚â”€â”€â”€â”€â–¶â”‚ å‘½ä¸­ï¼šè¿”å›      â”‚
â”‚ brand:domain:   â”‚     â”‚ brand_id        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ æœªå‘½ä¸­
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŸ¥è¯¢æ•°æ®åº“      â”‚
â”‚ brands.domain   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å†™å…¥ KV ç¼“å­˜    â”‚
â”‚ æ³¨å…¥ x-brand-id â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ å“ç‰Œé…ç½®ç¤ºä¾‹

```sql
-- åˆ›å»ºå“ç‰Œ
INSERT INTO brands (name, slug, domain, owner_email, is_active, settings)
VALUES (
  'TechGear',
  'techgear',
  'techgear.com',
  'admin@techgear.com',
  true,
  jsonb_build_object(
    'currency', 'USD',
    'locale', 'en-US',
    'timezone', 'America/New_York',
    'primary_color', '#1a56db',
    'secondary_color', '#f97316'
  )
);

-- ç»‘å®šå¤šåŸŸå
INSERT INTO brand_domains (brand_id, domain, is_primary)
VALUES 
  ('brand-uuid', 'techgear.com', true),
  ('brand-uuid', 'www.techgear.com', false);

-- åˆ†é…ç”¨æˆ·æƒé™
INSERT INTO brand_user_assignments (brand_id, user_id, role)
VALUES ('brand-uuid', 'user-uuid', 'admin');
```

---

## ğŸ‘¥ ç”¨æˆ·è§’è‰²

| è§’è‰² | æƒé™ |
|------|------|
| super_admin | æ‰€æœ‰å“ç‰Œå®Œå…¨æ§åˆ¶ |
| brand_admin | å•å“ç‰Œå®Œå…¨æ§åˆ¶ |
| brand_editor | å•å“ç‰Œå†…å®¹ç¼–è¾‘ |
| brand_viewer | å•å“ç‰Œåªè¯» |
