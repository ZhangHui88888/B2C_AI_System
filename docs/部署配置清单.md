# DTC ç‹¬ç«‹ç«™ç³»ç»Ÿ - éƒ¨ç½²é…ç½®æ¸…å•

> æœ€åæ›´æ–°ï¼š2025-12-26
> ç³»ç»Ÿå¼€å‘å·² 100% å®Œæˆï¼Œæœ¬æ–‡æ¡£åˆ—å‡ºéƒ¨ç½²å‰éœ€è¦å®Œæˆçš„é…ç½®é¡¹

---

## âœ… å¼€å‘è¿›åº¦

**æ‰€æœ‰åŠŸèƒ½å·²å¼€å‘å®Œæˆï¼š**
- ç¬¬1-10é˜¶æ®µå…¨éƒ¨å®Œæˆ
- 200+ åŠŸèƒ½æ¨¡å—
- 17 ä¸ªæ•°æ®åº“è¿ç§»æ–‡ä»¶
- å®Œæ•´çš„ç®¡ç†åå°

---

## ğŸ”§ éƒ¨ç½²å‰å¿…é¡»å®Œæˆçš„é…ç½®

### 1. æ•°æ®åº“è¿ç§»ï¼ˆå·²å®Œæˆï¼‰

éœ€è¦åœ¨ Supabase ä¸­æ‰§è¡Œä»¥ä¸‹è¿ç§»æ–‡ä»¶ï¼ˆæŒ‰é¡ºåºï¼‰ï¼š

```
docs/database/
â”œâ”€â”€ 001_initial_schema.sql
â”œâ”€â”€ 002_products.sql
â”œâ”€â”€ ...
â”œâ”€â”€ 016_advanced_seo_analysis.sql
â””â”€â”€ 017_user_retention.sql
```

### 2. ç¯å¢ƒå˜é‡é…ç½®

#### Cloudflare Worker (`worker/wrangler.toml` æˆ– Secrets)

| å˜é‡å | ç”¨é€” | å¿…éœ€ |
|--------|------|------|
| `SUPABASE_URL` | Supabase é¡¹ç›® URL | âœ… |
| `SUPABASE_SERVICE_KEY` | Supabase Service Role Key | âœ… |
| `STRIPE_SECRET_KEY` | Stripe æ”¯ä»˜å¯†é’¥ | âœ… |
| `STRIPE_WEBHOOK_SECRET` | Stripe Webhook ç­¾åå¯†é’¥ | âœ… |
| `RESEND_API_KEY` | Resend é‚®ä»¶æœåŠ¡ API Key | âœ… |
| `DEEPSEEK_API_KEY` | DeepSeek AI API Key | âœ… |
| `CF_ACCOUNT_ID` | Cloudflare Account ID | å¯é€‰ |
| `CF_IMAGES_TOKEN` | Cloudflare Images Token | å¯é€‰ |

#### å‰ç«¯ (`frontend/.env`)

| å˜é‡å | ç”¨é€” | å¿…éœ€ |
|--------|------|------|
| `PUBLIC_SUPABASE_URL` | Supabase é¡¹ç›® URL | âœ… |
| `PUBLIC_SUPABASE_ANON_KEY` | Supabase Anon Key | âœ… |
| `PUBLIC_API_BASE_URL` | Worker API åœ°å€ | âœ… |

### 3. ç¬¬ä¸‰æ–¹æœåŠ¡é…ç½®

#### æ”¯ä»˜æœåŠ¡ï¼ˆå¿…éœ€ï¼‰
| æœåŠ¡ | é…ç½®é¡¹ | è·å–æ–¹å¼ |
|------|--------|----------|
| Stripe | Secret Key, Webhook Secret | [Stripe Dashboard](https://dashboard.stripe.com) |

#### é‚®ä»¶æœåŠ¡ï¼ˆå¿…éœ€ï¼‰
| æœåŠ¡ | é…ç½®é¡¹ | è·å–æ–¹å¼ |
|------|--------|----------|
| Resend | API Key | [Resend Dashboard](https://resend.com) |

#### AI æœåŠ¡ï¼ˆå¿…éœ€ï¼‰
| æœåŠ¡ | é…ç½®é¡¹ | è·å–æ–¹å¼ |
|------|--------|----------|
| DeepSeek | API Key | [DeepSeek Platform](https://platform.deepseek.com) |

#### å¹¿å‘Šè¿½è¸ªï¼ˆæŒ‰éœ€é…ç½®ï¼‰
| æœåŠ¡ | é…ç½®é¡¹ | ç®¡ç†åå°ä½ç½® |
|------|--------|--------------|
| Facebook Pixel | Pixel ID, Access Token | `/admin/marketing/pixels` |
| Google Ads | Conversion ID, Label | `/admin/marketing/pixels` |
| TikTok Pixel | Pixel ID, Access Token | `/admin/marketing/pixels` |
| Pinterest Tag | Tag ID | `/admin/marketing/pixels` |

#### SEO å·¥å…·ï¼ˆæŒ‰éœ€é…ç½®ï¼‰
| æœåŠ¡ | é…ç½®é¡¹ | ç”¨é€” |
|------|--------|------|
| Google Search Console | OAuth Client ID/Secret | ç´¢å¼•çŠ¶æ€ç›‘æ§ |
| Cloudflare Images | Account ID, Token | å›¾ç‰‡å‹ç¼©/WebP |

### 4. Cloudflare é…ç½®

#### Pages éƒ¨ç½²
- è¿æ¥ GitHub ä»“åº“
- æ„å»ºå‘½ä»¤ï¼š`npm run build`
- è¾“å‡ºç›®å½•ï¼š`dist`
- æ ¹ç›®å½•ï¼š`frontend`

#### Workers éƒ¨ç½²
- æ ¹ç›®å½•ï¼š`worker`
- å‘½ä»¤ï¼š`npx wrangler deploy`

#### å®šæ—¶ä»»åŠ¡ï¼ˆCron Triggersï¼‰

éœ€è¦åœ¨ `wrangler.toml` ä¸­é…ç½®ï¼š

```toml
[triggers]
crons = [
  "0 * * * *",   # æ¯å°æ—¶ - å¼ƒè´­æ£€æµ‹
  "0 9 * * *",   # æ¯å¤©9ç‚¹ - å¤è´­æé†’
  "0 0 * * 0",   # æ¯å‘¨æ—¥ - SEOæŠ¥å‘Š
]
```

### 5. åŸŸåé…ç½®

| é…ç½®é¡¹ | è¯´æ˜ |
|--------|------|
| è‡ªå®šä¹‰åŸŸå | åœ¨ Cloudflare Pages æ·»åŠ  |
| SSL è¯ä¹¦ | Cloudflare è‡ªåŠ¨ç®¡ç† |
| DNS è®°å½• | CNAME æŒ‡å‘ Pages é¡¹ç›® |

---

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

```
[ ] 1. Supabase é¡¹ç›®åˆ›å»ºå¹¶è¿è¡Œæ‰€æœ‰è¿ç§»
[ ] 2. Stripe è´¦å·é…ç½®å¹¶è·å–å¯†é’¥
[ ] 3. Resend è´¦å·é…ç½®å¹¶éªŒè¯åŸŸå
[ ] 4. DeepSeek API Key è·å–
[ ] 5. Cloudflare Pages éƒ¨ç½²å‰ç«¯
[ ] 6. Cloudflare Workers éƒ¨ç½²åç«¯
[ ] 7. é…ç½®æ‰€æœ‰ç¯å¢ƒå˜é‡
[ ] 8. è®¾ç½® Webhook endpoints
[ ] 9. é…ç½®è‡ªå®šä¹‰åŸŸå
[ ] 10. æµ‹è¯•æ”¯ä»˜æµç¨‹
[ ] 11. æµ‹è¯•é‚®ä»¶å‘é€
[ ] 12. åœ¨ç®¡ç†åå°é…ç½®å¹¿å‘Šåƒç´ ï¼ˆå¦‚éœ€è¦ï¼‰
[ ] 13. åˆå§‹åŒ–ä¼šå‘˜ç­‰çº§ï¼ˆ/admin/marketing/loyaltyï¼‰
[ ] 14. é…ç½®æ¨èæœ‰ç¤¼ï¼ˆ/admin/marketing/referralsï¼‰
```

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Supabase æ–‡æ¡£](https://supabase.com/docs)
- [Cloudflare Workers æ–‡æ¡£](https://developers.cloudflare.com/workers)
- [Stripe æ–‡æ¡£](https://stripe.com/docs)
- [Resend æ–‡æ¡£](https://resend.com/docs)

---

## ğŸ“ é¡¹ç›®ç»“æ„å¿«é€Ÿå‚è€ƒ

```
B2C_AI_System/
â”œâ”€â”€ frontend/          # Astro å‰ç«¯
â”‚   â”œâ”€â”€ src/pages/admin/   # ç®¡ç†åå°é¡µé¢
â”‚   â””â”€â”€ .env.example       # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ worker/            # Cloudflare Worker åç«¯
â”‚   â”œâ”€â”€ src/routes/        # API è·¯ç”±
â”‚   â””â”€â”€ wrangler.toml      # Worker é…ç½®
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ database/          # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â””â”€â”€ scripts/           # éƒ¨ç½²è„šæœ¬
```
