# 1.1 基础架构

## 功能概述

搭建完整的前后端项目结构，配置开发环境和工具链。

## 实现内容

### 前端架构 (Astro)

**项目结构**
```
frontend/
├── src/
│   ├── components/     # 可复用组件
│   ├── layouts/        # 页面布局
│   ├── pages/          # 路由页面
│   ├── lib/            # 工具库
│   └── styles/         # 全局样式
├── public/             # 静态资源
├── astro.config.mjs    # Astro配置
├── tailwind.config.mjs # TailwindCSS配置
└── tsconfig.json       # TypeScript配置
```

**核心配置**
- Astro SSR模式配置
- TailwindCSS集成
- TypeScript严格模式
- 环境变量管理

### 后端架构 (Cloudflare Workers)

**项目结构**
```
worker/
├── src/
│   ├── routes/         # API路由
│   ├── middleware/     # 中间件
│   └── utils/          # 工具函数
├── wrangler.toml       # Worker配置
├── tsconfig.json       # TypeScript配置
└── package.json        # 依赖管理
```

**核心功能**
- Hono框架集成
- CORS中间件
- 错误处理
- 响应工具函数

### 基础组件

**Layout组件** ([`Layout.astro`](../../frontend/src/layouts/Layout.astro))
- SEO meta标签
- 响应式布局
- 全局样式注入

**Header组件** ([`Header.astro`](../../frontend/src/components/layout/Header.astro))
- 响应式导航
- 购物车图标
- 移动端菜单

**Footer组件** ([`Footer.astro`](../../frontend/src/components/layout/Footer.astro))
- 链接分组
- 社交媒体
- 版权信息

### 工具库

**API客户端** ([`api.ts`](../../frontend/src/lib/api.ts))
- 统一的API请求封装
- 错误处理
- 类型安全

**购物车管理** ([`cart.ts`](../../frontend/src/lib/cart.ts))
- localStorage持久化
- 购物车状态管理
- 数量更新逻辑

**Supabase客户端** ([`supabase.ts`](../../frontend/src/lib/supabase.ts))
- 客户端初始化
- 类型定义导入

## 技术要点

### 性能优化
- 组件懒加载
- 图片优化（WebP、懒加载）
- CSS按需加载
- 代码分割

### 开发体验
- TypeScript类型检查
- ESLint代码规范
- 热更新开发服务器
- 环境变量管理

## 配置文件

### 环境变量模板 ([`.env.example`](../../frontend/.env.example))
```env
PUBLIC_SUPABASE_URL=your_supabase_url
PUBLIC_SUPABASE_ANON_KEY=your_anon_key
PUBLIC_WORKER_URL=http://localhost:8787
PUBLIC_STRIPE_PUBLIC_KEY=your_stripe_key
```

### Wrangler配置 ([`wrangler.toml`](../../worker/wrangler.toml))
- Worker名称和路由
- 环境变量绑定
- KV命名空间（可选）
- 兼容性标志

## 相关文档

- [环境变量配置](../deployment/环境变量配置.md)
- [部署指南](../deployment/部署指南.md)
- [数据库模型](./1.2-数据库模型.md)

## 状态

✅ **已完成** - 所有基础架构已搭建完成