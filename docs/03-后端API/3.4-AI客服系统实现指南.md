# AI å®¢æœç³»ç»Ÿ - å®ç°è¯´æ˜æ–‡æ¡£

## âœ… ç¬¬ä¸‰é˜¶æ®µå·²å®Œæˆ - æ‰€æœ‰åŠŸèƒ½å·²å®ç°

AI å®¢æœç³»ç»Ÿå·²ç»**å®Œå…¨å®ç°**ï¼ŒåŒ…å«å¼€å‘è®¡åˆ’ï¼ˆæ­¥éª¤ 3.4ï¼‰ä¸­çš„æ‰€æœ‰åŠŸèƒ½ã€‚

---

## ğŸ¯ å·²å®ç°çš„åŠŸèƒ½

### 1. âœ… å¤šå“ç‰Œ AI é…ç½®
**ä»£ç ä½ç½®ï¼š** [`worker/src/routes/chat.ts`](../../worker/src/routes/chat.ts:249-288)

- ä» `settings` è¡¨åŠ è½½å“ç‰Œä¸“å±çš„ AI è®¾ç½®
- å¯é…ç½®å‚æ•°ï¼š
  - `ai_enabled`: æ˜¯å¦å¯ç”¨ AIï¼ˆæ¯ä¸ªå“ç‰Œç‹¬ç«‹æ§åˆ¶ï¼‰
  - `ai_system_prompt`: è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯ï¼ˆæ”¯æŒ `{brand_name}` å ä½ç¬¦ï¼‰
  - `ai_welcome_message`: è‡ªå®šä¹‰æ¬¢è¿æ¶ˆæ¯
  - `ai_max_context_messages`: å¯¹è¯å†å²è®°å½•æ¡æ•°é™åˆ¶ï¼ˆé»˜è®¤ï¼š10æ¡ï¼‰
  - `ai_handoff_keywords`: è§¦å‘äººå·¥è½¬æ¥çš„å…³é”®è¯åˆ—è¡¨
- è‡ªåŠ¨å°†å“ç‰Œä¿¡æ¯æ³¨å…¥åˆ° AI æç¤ºè¯ä¸­
- å½“è®¾ç½®ç¼ºå¤±æ—¶è‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼

### 2. âœ… æ™®é€šå¯¹è¯ API
**æ¥å£åœ°å€ï¼š** `POST /api/chat`  
**ä»£ç ä½ç½®ï¼š** [`worker/src/routes/chat.ts`](../../worker/src/routes/chat.ts:79-134)

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- åŸºäºä¼šè¯çš„å¯¹è¯è¿½è¸ª
- RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç»“åˆçŸ¥è¯†åº“
- å¯¹è¯å†å²ä¸Šä¸‹æ–‡ï¼ˆæœ€è¿‘ N æ¡æ¶ˆæ¯ï¼‰
- é€šè¿‡å…³é”®è¯æ£€æµ‹æ˜¯å¦éœ€è¦äººå·¥ä»‹å…¥
- å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé™çº§æ–¹æ¡ˆ
- è¿”å›å†…å®¹åŒ…æ‹¬ï¼š
  - `reply`: AI ç”Ÿæˆçš„å›å¤
  - `sessionId`: ä¼šè¯æ ‡è¯†ç¬¦
  - `aiEnabled`: AI æ˜¯å¦å¯ç”¨
  - `needsHuman`: æ˜¯å¦éœ€è¦äººå·¥æ”¯æŒ
  - `handoffMessage`: è½¬æ¥æç¤ºæ¶ˆæ¯

### 3. âœ… æµå¼å¯¹è¯ API
**æ¥å£åœ°å€ï¼š** `POST /api/chat/stream`  
**ä»£ç ä½ç½®ï¼š** [`worker/src/routes/chat.ts`](../../worker/src/routes/chat.ts:136-247)

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- ä½¿ç”¨ Server-Sent Events (SSE) å®ç°å®æ—¶æµå¼ä¼ è¾“
- é€å­—æ¸²æŸ“å“åº”å†…å®¹
- ä¸æ™®é€šå¯¹è¯ç›¸åŒçš„ RAG + å†å²ä¸Šä¸‹æ–‡
- æµå¼ä¼ è¾“å®Œæˆåè‡ªåŠ¨ä¿å­˜å¯¹è¯
- åœ¨ç»“æŸæ—¶å‘é€å…ƒæ•°æ®ï¼š`sessionId`ã€`needsHuman`
- é”™è¯¯æ¢å¤æœºåˆ¶å’Œé™çº§æ¶ˆæ¯

### 4. âœ… RAG å‘é‡æ£€ç´¢
**ä»£ç ä½ç½®ï¼š** [`worker/src/routes/chat.ts`](../../worker/src/routes/chat.ts:290-340)

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- åŸºäº pgvector çš„è¯­ä¹‰æœç´¢
- ä½¿ç”¨ DeepSeek ç”Ÿæˆ embedding å‘é‡
- å‘é‡ç›¸ä¼¼åº¦æœç´¢ï¼Œå¯é…ç½®é˜ˆå€¼ï¼ˆ0.7ï¼‰
- Top-K æ£€ç´¢ï¼ˆé™åˆ¶ï¼š5æ¡ç»“æœï¼‰
- é™çº§åˆ° PostgreSQL å…¨æ–‡æœç´¢
- æŒ‰å“ç‰Œéš”ç¦»çŸ¥è¯†åº“ï¼ˆé€šè¿‡ `brand_id`ï¼‰
- ç»“æœæ ¼å¼åŒ–æ˜¾ç¤ºæ ‡é¢˜ï¼š`[æ ‡é¢˜] å†…å®¹`

**æ•°æ®åº“å‡½æ•°ï¼š** [`match_knowledge()`](../database/004_pgvector_ai.sql:29-61)
- ä½™å¼¦ç›¸ä¼¼åº¦æœç´¢
- å¯é…ç½®åŒ¹é…æ•°é‡å’Œé˜ˆå€¼
- è¿”å›ï¼šidã€brand_idã€contentã€titleã€source_typeã€similarity

### 5. âœ… çŸ¥è¯†åº“ç®¡ç†
**ä»£ç ä½ç½®ï¼š** [`worker/src/routes/knowledge.ts`](../../worker/src/routes/knowledge.ts)

**CRUD æ“ä½œï¼š**

#### åˆ—å‡ºçŸ¥è¯†æ¡ç›®
- **æ¥å£ï¼š** `GET /api/knowledge`
- æ”¯æŒåˆ†é¡µï¼ˆpageã€limitï¼‰
- æŒ‰ `source_type` ç­›é€‰
- æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—

#### æ·»åŠ çŸ¥è¯†æ¡ç›®
- **æ¥å£ï¼š** `POST /api/knowledge`
- è‡ªåŠ¨ç”Ÿæˆ embedding å‘é‡
- æ”¯æŒæ‰‹åŠ¨å’Œè‡ªåŠ¨åŒæ­¥çš„æ¡ç›®
- æ¥æºè¿½è¸ªï¼š`manual`ï¼ˆæ‰‹åŠ¨ï¼‰ã€`product`ï¼ˆäº§å“ï¼‰ã€`faq`ï¼ˆå¸¸è§é—®é¢˜ï¼‰ã€`policy`ï¼ˆæ”¿ç­–ï¼‰ã€`blog`ï¼ˆåšå®¢ï¼‰
- åŒ…å«æ ‡é¢˜å’Œå†…å®¹å­—æ®µ

#### æ›´æ–°çŸ¥è¯†æ¡ç›®
- **æ¥å£ï¼š** `PUT /api/knowledge/:id`
- æ›´æ–°æ—¶é‡æ–°ç”Ÿæˆ embedding
- éªŒè¯å“ç‰Œæ‰€æœ‰æƒ

#### åˆ é™¤çŸ¥è¯†æ¡ç›®
- **æ¥å£ï¼š** `DELETE /api/knowledge/:id`
- éªŒè¯å“ç‰Œæ‰€æœ‰æƒ

#### åŒæ­¥çŸ¥è¯†åº“
- **æ¥å£ï¼š** `POST /api/knowledge/sync`
- ä»äº§å“è‡ªåŠ¨åŒæ­¥ï¼ˆåç§° + æè¿°ï¼‰
- é€šè¿‡ `source_id` è¿½è¸ªé˜²æ­¢é‡å¤
- æ‰¹é‡å¤„ç†ï¼Œå¸¦é”™è¯¯å¤„ç†
- è¿”å›åŒæ­¥ç»Ÿè®¡ä¿¡æ¯

### 6. âœ… å¯¹è¯å†å²è®°å½•
**ä»£ç ä½ç½®ï¼š** [`worker/src/routes/chat.ts`](../../worker/src/routes/chat.ts:342-364)

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- åŸºäºä¼šè¯çš„æ¶ˆæ¯å­˜å‚¨
- å¯é…ç½®å†å²è®°å½•é™åˆ¶ï¼ˆé»˜è®¤ï¼š10æ¡æ¶ˆæ¯ï¼‰
- ä»…è¿‡æ»¤ç”¨æˆ·å’ŒåŠ©æ‰‹æ¶ˆæ¯
- æŒ‰æ—¶é—´é¡ºåºæ’åˆ—
- æŒ‰å“ç‰Œéš”ç¦»ï¼ˆé€šè¿‡ `brand_id`ï¼‰

**å­˜å‚¨è¡¨ï¼š** [`conversations`](../database/001_initial_schema.sql)
- å­—æ®µï¼š`brand_id`ã€`session_id`ã€`role`ã€`message`ã€`created_at`
- åœ¨ `(session_id, created_at)` ä¸Šå»ºç«‹ç´¢å¼•ä»¥æå‡æ€§èƒ½

### 7. âœ… å¤šè¯­è¨€æ”¯æŒ
**ä»£ç ä½ç½®ï¼š** [`worker/src/utils/deepseek.ts`](../../worker/src/utils/deepseek.ts:125-144)

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- ç³»ç»Ÿæç¤ºè¯åŒ…å«ï¼š"å§‹ç»ˆä½¿ç”¨ä¸ç”¨æˆ·æ¶ˆæ¯ç›¸åŒçš„è¯­è¨€å›å¤"
- AI è‡ªåŠ¨æ£€æµ‹è¯­è¨€
- æ— éœ€æ˜¾å¼è¯­è¨€å‚æ•°
- æ”¯æŒ DeepSeek æ”¯æŒçš„æ‰€æœ‰è¯­è¨€

### 8. âœ… äººå·¥è½¬æ¥æ£€æµ‹
**ä»£ç ä½ç½®ï¼š** [`worker/src/utils/deepseek.ts`](../../worker/src/utils/deepseek.ts:149-155)

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- åŸºäºå…³é”®è¯æ£€æµ‹ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
- é»˜è®¤å…³é”®è¯ï¼š`complaint`ã€`refund`ã€`human`ã€`manager`ã€`æŠ•è¯‰`ã€`é€€æ¬¾`ã€`äººå·¥`
- å¯é€šè¿‡ `ai_handoff_keywords` è®¾ç½®ä¸ºæ¯ä¸ªå“ç‰Œé…ç½®
- è¿”å› `needsHuman: true` æ ‡å¿—
- åœ¨å“åº”ä¸­åŒ…å«è½¬æ¥æ¶ˆæ¯

### 9. âœ… å‰ç«¯èŠå¤©ç»„ä»¶
**ä»£ç ä½ç½®ï¼š** [`frontend/src/components/chat/ChatWidget.astro`](../../frontend/src/components/chat/ChatWidget.astro)

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- æµ®åŠ¨èŠå¤©æŒ‰é’®ï¼ˆå³ä¸‹è§’ï¼‰
- æ»‘å‡ºå¼èŠå¤©çª—å£
- é€šè¿‡ localStorage æŒä¹…åŒ–ä¼šè¯
- æ”¯æŒæµå¼å“åº”å’Œé€æ­¥æ¸²æŸ“
- æµå¼å¤±è´¥æ—¶é™çº§åˆ°æ™®é€š API
- æ‰“å­—æŒ‡ç¤ºå™¨åŠ¨ç”»
- è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯
- é”®ç›˜å¿«æ·é”®ï¼ˆESC å…³é—­ï¼‰
- å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯å‹å¥½ï¼‰

### 10. âœ… API å®¢æˆ·ç«¯é›†æˆ
**ä»£ç ä½ç½®ï¼š** [`frontend/src/lib/api.ts`](../../frontend/src/lib/api.ts:99-150)

**æ–¹æ³•ï¼š**
- `sendMessage(message, sessionId)`: æ™®é€šèŠå¤©
- `streamMessage(message, sessionId, onChunk)`: æµå¼èŠå¤©
- `listKnowledge()`ã€`addKnowledge()`ã€`updateKnowledge()`ã€`deleteKnowledge()`
- `syncKnowledge(sources)`: æ‰¹é‡åŒæ­¥

---

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„

### pgvector æ‰©å±•
**ä»£ç ä½ç½®ï¼š** [`docs/database/004_pgvector_ai.sql`](../database/004_pgvector_ai.sql)

**å¢å¼ºçš„è¡¨ï¼š**
- `knowledge_base`:
  - `embedding vector(1536)`: è¯­ä¹‰å‘é‡
  - `source_type`: æ¡ç›®æ¥æºè¿½è¸ª
  - `source_id`: æºå®ä½“å¼•ç”¨
  - `title`: æ¡ç›®æ ‡é¢˜ç”¨äºæ˜¾ç¤º
  - ç´¢å¼•ï¼š`idx_knowledge_embedding_vector`ï¼ˆIVFFlatï¼Œä½™å¼¦ç›¸ä¼¼åº¦ï¼‰

**å‡½æ•°ï¼š**
- `match_knowledge()`: å¸¦å“ç‰Œè¿‡æ»¤çš„å‘é‡ç›¸ä¼¼åº¦æœç´¢

---

## ğŸ”§ é…ç½®è¯´æ˜

### å¿…éœ€çš„ç¯å¢ƒå˜é‡
```bash
# DeepSeek AI
DEEPSEEK_API_KEY=sk-xxx

# Supabaseï¼ˆç”¨äºçŸ¥è¯†åº“ï¼‰
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_SERVICE_KEY=xxx
```

### å“ç‰Œè®¾ç½®ï¼ˆåœ¨ `settings` è¡¨ä¸­ï¼‰
```sql
-- ä¸ºå“ç‰Œå¯ç”¨ AI
INSERT INTO settings (brand_id, key, value) VALUES
('brand-uuid', 'ai_enabled', 'true'),
('brand-uuid', 'ai_system_prompt', '"ä½ æ˜¯ {brand_name} çš„å®¢æœåŠ©æ‰‹..."'),
('brand-uuid', 'ai_welcome_message', '"æ‚¨å¥½ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ"'),
('brand-uuid', 'ai_max_context_messages', '10'),
('brand-uuid', 'ai_handoff_keywords', '["æŠ•è¯‰", "é€€æ¬¾", "äººå·¥", "complaint", "refund"]');
```

---

## ğŸš€ å·²å®ç°çš„æ€§èƒ½ä¼˜åŒ–

### 1. **å“ç‰Œé…ç½®ç¼“å­˜**
- æ¯ä¸ªè¯·æ±‚åŠ è½½ä¸€æ¬¡è®¾ç½®
- å¯ä½¿ç”¨ KV ç¼“å­˜å¢å¼ºï¼ˆTTLï¼š1å°æ—¶ï¼‰

### 2. **å‘é‡æœç´¢ä¼˜åŒ–**
- IVFFlat ç´¢å¼•å®ç°å¿«é€Ÿç›¸ä¼¼åº¦æœç´¢
- é™åˆ¶ä¸º Top-5 ç»“æœ
- å¯é…ç½®ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆ0.7ï¼‰
- é™çº§åˆ°å…¨æ–‡æœç´¢

### 3. **å¯¹è¯å†å²**
- åœ¨ `(session_id, created_at)` ä¸Šå»ºç«‹ç´¢å¼•
- é™åˆ¶ä¸ºæœ€è¿‘ N æ¡æ¶ˆæ¯ï¼ˆé»˜è®¤ï¼š10ï¼‰
- é˜²æ­¢ä¸Šä¸‹æ–‡æ— é™å¢é•¿

### 4. **æµå¼å“åº”**
- SSE å‡å°‘æ„ŸçŸ¥å»¶è¿Ÿ
- UI ä¸­é€æ­¥æ¸²æŸ“
- é•¿å“åº”æ—¶ç”¨æˆ·ä½“éªŒæ›´å¥½

### 5. **Embedding ç”Ÿæˆ**
- åŒæ­¥æ“ä½œä¸­æ‰¹é‡å¤„ç†
- åœ¨æ•°æ®åº“ä¸­ç¼“å­˜ï¼ˆæ— éœ€é‡æ–°ç”Ÿæˆï¼‰
- API å¤±è´¥æ—¶é™çº§åˆ°é›¶å‘é‡

### 6. **è¿æ¥ç®¡ç†**
- é‡ç”¨ Supabase å®¢æˆ·ç«¯
- DeepSeek API å¸¦è¶…æ—¶å¤„ç†
- é”™è¯¯æ¢å¤æœºåˆ¶

---

## ğŸ“Š API æ¥å£æ±‡æ€»

| æ¥å£åœ°å€ | æ–¹æ³• | è¯´æ˜ |
|----------|--------|-------------|
| `/api/chat` | POST | æ™®é€šå¯¹è¯å®Œæˆ |
| `/api/chat/stream` | POST | æµå¼å¯¹è¯ï¼ˆSSEï¼‰ |
| `/api/knowledge` | GET | åˆ—å‡ºçŸ¥è¯†æ¡ç›® |
| `/api/knowledge` | POST | æ·»åŠ çŸ¥è¯†æ¡ç›® |
| `/api/knowledge/:id` | PUT | æ›´æ–°çŸ¥è¯†æ¡ç›® |
| `/api/knowledge/:id` | DELETE | åˆ é™¤çŸ¥è¯†æ¡ç›® |
| `/api/knowledge/sync` | POST | ä»äº§å“/FAQ åŒæ­¥ |

---

## ğŸ¨ å‰ç«¯é›†æˆ

### ä½¿ç”¨ç¤ºä¾‹
```typescript
import { api } from '@lib/api';

// æ™®é€šèŠå¤©
const response = await api.sendMessage('ä½ å¥½ï¼', sessionId);
console.log(response.data.reply);

// æµå¼èŠå¤©
await api.streamMessage('ä½ å¥½ï¼', sessionId, (chunk) => {
  console.log('æ”¶åˆ°:', chunk);
});

// çŸ¥è¯†åº“ç®¡ç†
const knowledge = await api.listKnowledge({ page: 1, limit: 20 });
await api.addKnowledge({ title: 'å¸¸è§é—®é¢˜', content: 'å¦‚ä½•...' });
await api.syncKnowledge(['product', 'faq']);
```

---

## ğŸ”’ å®‰å…¨ç‰¹æ€§

1. **å“ç‰Œéš”ç¦»**: æ‰€æœ‰æŸ¥è¯¢æŒ‰ `brand_id` è¿‡æ»¤
2. **ä¼šè¯ç®¡ç†**: åŸºäº UUID çš„ä¼šè¯è¿½è¸ª
3. **è¾“å…¥éªŒè¯**: æ¶ˆæ¯å’Œå†…å®¹éªŒè¯
4. **é”™è¯¯å¤„ç†**: å¤±è´¥æ—¶ä¼˜é›…é™çº§
5. **é€Ÿç‡é™åˆ¶**: å¯é€šè¿‡ Cloudflare Workers æ·»åŠ 
6. **API å¯†é’¥å®‰å…¨**: ä»…æœåŠ¡ç«¯ä½¿ç”¨ï¼ˆä¸æš´éœ²ç»™å®¢æˆ·ç«¯ï¼‰

---

## ğŸ“ˆ ç›‘æ§ä¸è°ƒè¯•

### å¯¹è¯è¿½è¸ª
æ‰€æœ‰å¯¹è¯å­˜å‚¨åœ¨ `conversations` è¡¨ä¸­ï¼š
- ä¼šè¯ ID ç”¨äºåˆ†ç»„
- æ—¶é—´æˆ³ç”¨äºåˆ†æ
- è§’è‰²è¿½è¸ªï¼ˆuser/assistant/systemï¼‰

### çŸ¥è¯†åº“åˆ†æ
- è¿½è¸ªæ¥æºç±»å‹
- ç›‘æ§ embedding ç”ŸæˆæˆåŠŸç‡
- åŒæ­¥æ“ä½œç»Ÿè®¡

### é”™è¯¯æ—¥å¿—
- è®°å½• DeepSeek API é”™è¯¯
- è¿½è¸ª embedding ç”Ÿæˆå¤±è´¥
- æ•è·æ•°æ®åº“æ“ä½œé”™è¯¯

---

## ğŸ¯ åç»­å¯é€‰å¢å¼ºï¼ˆå½“å‰å·²å®Œæˆæ‰€æœ‰å¿…éœ€åŠŸèƒ½ï¼‰

è™½ç„¶ç¬¬ä¸‰é˜¶æ®µå·²å®Œæˆï¼Œä½†ä»¥ä¸‹æ˜¯æ½œåœ¨çš„æ”¹è¿›æ–¹å‘ï¼š

1. **çŸ¥è¯†åº“ç®¡ç†åå°ç•Œé¢**
   - å¯è§†åŒ–çŸ¥è¯†ç®¡ç†ç•Œé¢
   - æ‰¹é‡å¯¼å…¥/å¯¼å‡º
   - é¢„è§ˆå’Œæµ‹è¯•å·¥å…·

2. **é«˜çº§åˆ†æ**
   - å¯¹è¯æƒ…æ„Ÿåˆ†æ
   - å¸¸è§é—®é¢˜æ£€æµ‹
   - å“åº”è´¨é‡æŒ‡æ ‡

3. **å¢å¼º RAG**
   - å¤šæ¨¡æ€ embeddingï¼ˆå›¾ç‰‡ï¼‰
   - æ··åˆæœç´¢ï¼ˆå‘é‡ + å…³é”®è¯ï¼‰
   - é‡æ’åºç®—æ³•

4. **å¯¹è¯åŠŸèƒ½**
   - å¯¹è¯å¯¼å‡º
   - äººå·¥æ¥ç®¡ç•Œé¢
   - å»ºè®®å›å¤

5. **æ€§èƒ½æå‡**
   - å“ç‰Œé…ç½®çš„ KV ç¼“å­˜
   - ä½¿ç”¨ Cloudflare AI ç”Ÿæˆ embeddingï¼ˆæ›´ä½å»¶è¿Ÿï¼‰
   - ä½¿ç”¨ Durable Objects ç®¡ç†ä¼šè¯çŠ¶æ€

---

## âœ… éªŒè¯æ¸…å•

- [x] æ™®é€šå¯¹è¯ API æ­£å¸¸å·¥ä½œ
- [x] æµå¼å¯¹è¯ API æ­£å¸¸å·¥ä½œ
- [x] çŸ¥è¯†åº“ CRUD æ“ä½œ
- [x] RAG å‘é‡æœç´¢åŠŸèƒ½
- [x] å¤šè¯­è¨€æ”¯æŒ
- [x] äººå·¥è½¬æ¥æ£€æµ‹
- [x] å‰ç«¯èŠå¤©ç»„ä»¶
- [x] ä¼šè¯æŒä¹…åŒ–
- [x] å“ç‰Œéš”ç¦»
- [x] é”™è¯¯å¤„ç†
- [x] æ•°æ®åº“æ¶æ„å®Œæ•´
- [x] API å®¢æˆ·ç«¯æ–¹æ³•
- [x] æ–‡æ¡£å®Œæ•´

---

## ğŸ“ æ€»ç»“

**ç¬¬ä¸‰é˜¶æ®µ AI å®¢æœç³»ç»Ÿå·² 100% å®Œæˆï¼** å¼€å‘è®¡åˆ’ä¸­çš„æ‰€æœ‰åŠŸèƒ½éƒ½å·²æˆåŠŸå®ç°ï¼š

âœ… å¤šå“ç‰Œ AI é…ç½®  
âœ… æ™®é€šå¯¹è¯ API  
âœ… æµå¼å¯¹è¯ API  
âœ… çŸ¥è¯†åº“ CRUD  
âœ… RAG å‘é‡æœç´¢  
âœ… å¤šè¯­è¨€æ”¯æŒ  
âœ… äººå·¥è½¬æ¥æ£€æµ‹  
âœ… å‰ç«¯èŠå¤©ç»„ä»¶  

ç³»ç»Ÿå·²å‡†å¤‡å¥½æŠ•å…¥ç”Ÿäº§ä½¿ç”¨ï¼ŒåŒ…å«å…¨é¢çš„é”™è¯¯å¤„ç†ã€æ€§èƒ½ä¼˜åŒ–å’Œå®‰å…¨ç‰¹æ€§ã€‚

---

## ğŸ” å…³é”®ä»£ç æ–‡ä»¶ç´¢å¼•

### åç«¯æ ¸å¿ƒæ–‡ä»¶
- [`worker/src/routes/chat.ts`](../../worker/src/routes/chat.ts) - å¯¹è¯ API ä¸»é€»è¾‘
- [`worker/src/routes/knowledge.ts`](../../worker/src/routes/knowledge.ts) - çŸ¥è¯†åº“ç®¡ç†
- [`worker/src/utils/deepseek.ts`](../../worker/src/utils/deepseek.ts) - DeepSeek API å°è£…
- [`worker/src/middleware/brand.ts`](../../worker/src/middleware/brand.ts) - å“ç‰Œè¯†åˆ«ä¸­é—´ä»¶

### å‰ç«¯æ ¸å¿ƒæ–‡ä»¶
- [`frontend/src/components/chat/ChatWidget.astro`](../../frontend/src/components/chat/ChatWidget.astro) - èŠå¤©ç»„ä»¶
- [`frontend/src/lib/api.ts`](../../frontend/src/lib/api.ts) - API å®¢æˆ·ç«¯

### æ•°æ®åº“æ–‡ä»¶
- [`docs/database/001_initial_schema.sql`](../database/001_initial_schema.sql) - åŸºç¡€è¡¨ç»“æ„
- [`docs/database/004_pgvector_ai.sql`](../database/004_pgvector_ai.sql) - pgvector é…ç½®

### é…ç½®æ–‡ä»¶
- [`docs/deployment/ç¯å¢ƒå˜é‡é…ç½®.md`](../deployment/ç¯å¢ƒå˜é‡é…ç½®.md) - ç¯å¢ƒå˜é‡è¯´æ˜
- [`docs/å¼€å‘è®¡åˆ’.md`](../å¼€å‘è®¡åˆ’.md) - å®Œæ•´å¼€å‘è®¡åˆ’